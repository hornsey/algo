
## 中间件项目：大迁移

[Project Mezzanine: The Great Migration](https://eng.uber.com/mezzanine-migration/)

文件记录了作者在带领Uber中间件团队进行数据库迁移的背景、考虑和整个经过。

 Uber在早期项目中，使用的数据库是PostgreSQL，行程和其他各种数据都存在该数据库中，行程数据占据了大部分。
 随着业务的发展，行程数据飞速增长，技术团队考虑将行程数据迁移到一个可伸缩的存储仓库。
 新的存储仓库需要满足以下几点：
 * 操作健壮（无数据丢失、支持数据备份、其他数据中心副本、可预测等）
 * 存储及IO可伸缩
 * 高写入可用。
 * 支持二级索引
 * 任何操作不会停机（包括扩展存储、备份、加索引）
 
在考察了诸多技术方案后，Uber具体基于MySQL打造自己的分片数据存储，并支持以下关键特性：
 * 分片
 * 数据追加模型
 * 缓存写入
 * 分片二级索引
 
 Uber中间件团队从构思到实现，花了5个月的时间。从中也收获了一些经验：
 * 使用UUID。
 * 保持数据层简单。
 * 有一个学习曲线。
 * 快速完成。
 * 不断试错和纠错。
 
  

